
import MyDocument from '@/components/Document'; 
import datas from "../../data";
import { renderToBuffer } from '@react-pdf/renderer';

const svgBase64 =
  "PHN2ZyBhcmlhLWxhYmVsPSJOZXh0LmpzIGxvZ290eXBlIiBoZWlnaHQ9IjE4IiByb2xlPSJpbWciIHZpZXdCb3g9IjAgMCAzOTQgNzkiPjxwYXRoIGQ9Ik0yNjEuOTE5IDAuMDMzMDcyMkgzMzAuNTQ3VjEyLjdIMzAzLjMyM1Y3OS4zMzlIMjg5LjcxVjEyLjdIMjYxLjkxOVYwLjAzMzA3MjJaIiBmaWxsPSJ2YXIoLS1nZWlzdC1mb3JlZ3JvdW5kKSI+PC9wYXRoPjxwYXRoIGQ9Ik0xNDkuMDUyIDAuMDMzMDcyMlYxMi43SDk0LjA0MjFWMzMuMDc3MkgxMzguMjgxVjQ1Ljc0NDFIOTQuMDQyMVY2Ni42NzIxSDE0OS4wNTJWNzkuMzM5SDgwLjQzVjEyLjdIODAuNDI0M1YwLjAzMzA3MjJIMTQ5LjA1MloiIGZpbGw9InZhcigtLWdlaXN0LWZvcmVncm91bmQpIj48L3BhdGg+PHBhdGggZD0iTTE4My4zMiAwLjA2NjE0ODZIMTY1LjUwNkwyMjkuMzEyIDc5LjM3MjFIMjQ3LjE3OEwyMTUuMjcxIDM5Ljc0NjRMMjQ3LjEyNyAwLjEyNjY1NEwyMjkuMzEyIDAuMTU0MTg0TDIwNi4zNTIgMjguNjY5N0wxODMuMzIgMC4wNjYxNDg2WiIgZmlsbD0idmFyKC0tZ2Vpc3QtZm9yZWdyb3VuZCkiPjwvcGF0aD48cGF0aCBkPSJNMjAxLjYgNTYuNzE0OEwxOTIuNjc5IDQ1LjYyMjlMMTY1LjQ1NSA3OS40MzI2SDE4My4zMkwyMDEuNiA1Ni43MTQ4WiIgZmlsbD0idmFyKC0tZ2Vpc3QtZm9yZWdyb3VuZCkiPjwvcGF0aD48cGF0aCBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik04MC45MDcgNzkuMzM5TDE3LjAxNTEgMEgwVjc5LjMwNTlIMTMuNjEyMVYxNi45NTE2TDYzLjgwNjcgNzkuMzM5SDgwLjkwN1oiIGZpbGw9InZhcigtLWdlaXN0LWZvcmVncm91bmQpIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjwvcGF0aD48cGF0aCBkPSJNMzMzLjYwNyA3OC44NTQ2QzMzMi42MSA3OC44NTQ2IDMzMS43NjIgNzguNTA5MyAzMzEuMDUyIDc3LjgxODZDMzMwLjM0MiA3Ny4xMjc5IDMyOS45OTEgNzYuMjkxNyAzMzAgNzUuMzAxMUMzMjkuOTkxIDc0LjMzNzcgMzMwLjM0MiA3My41MTA2IDMzMS4wNTIgNzIuODE5OUMzMzEuNzYyIDcyLjEyOTIgMzMyLjYxIDcxLjc4MzggMzMzLjYwNyA3MS43ODM4QzMzNC41NjYgNzEuNzgzOCAzMzUuNDA1IDcyLjEyOTIgMzM2LjExNSA3Mi44MTk5QzMzNi44MzUgNzMuNTEwNiAzMzcuMTk0IDc0LjMzNzcgMzM3LjIwNCA3NS4zMDExQzMzNy4xOTQgNzUuOTU1NCAzMzcuMDI4IDc2LjU1NTIgMzM2LjY5NiA3Ny4wOTE0QzMzNi4zNTUgNzcuNjM2OCAzMzUuOTIyIDc4LjA2NCAzMzUuMzc3IDc4LjM3M0MzMzQuODQyIDc4LjY5MTEgMzM0LjI1MiA3OC44NTQ2IDMzMy42MDcgNzguODU0NloiIGZpbGw9InZhcigtLWdlaXN0LWZvcmVncm91bmQpIj48L3BhdGg+PHBhdGggZD0iTTM1Ni44NCA0NS40NDUzSDM2Mi44NzJWNjguNjg0NkMzNjIuODYzIDcwLjgyMDQgMzYyLjQwMSA3Mi42NDcyIDM2MS40OTggNzQuMTgzMkMzNjAuNTg1IDc1LjcxOTEgMzU5LjMyMSA3Ni44OTE0IDM1Ny42OTggNzcuNzE4NUMzNTYuMDg0IDc4LjUzNjQgMzU0LjE5MyA3OC45NTQ2IDM1Mi4wNDQgNzguOTU0NkMzNTAuMDc5IDc4Ljk1NDYgMzQ4LjMxOCA3OC42MDAxIDM0Ni43NSA3Ny45MDk0QzM0NS4xODIgNzcuMjE4NyAzNDMuOTM3IDc2LjE4MjYgMzQzLjAyNCA3NC44MTkzQzM0Mi4xMDEgNzMuNDU2IDM0MS42NDkgNzEuNzU2NSAzNDEuNjQ5IDY5LjcyMDdIMzQ3LjY5MUMzNDcuNyA3MC42MTE0IDM0Ny45MDMgNzEuMzgzOCAzNDguMjkgNzIuMDI5MUMzNDguNjc3IDcyLjY3NDQgMzQ5LjIxMiA3My4xNjUxIDM0OS44OTUgNzMuNTEwNUMzNTAuNTg2IDczLjg1NTkgMzUxLjM4IDc0LjAyODYgMzUyLjI3NCA3NC4wMjg2QzM1My4yNDMgNzQuMDI4NiAzNTQuMDczIDczLjgyODYgMzU0Ljc0NiA3My40MTk2QzM1NS40MTkgNzMuMDE5NyAzNTUuOTM2IDcyLjQxOTkgMzU2LjI5NiA3MS42MjAxQzM1Ni42NDYgNzAuODI5NSAzNTYuODMxIDY5Ljg0NzkgMzU2Ljg0IDY4LjY4NDZWNDUuNDQ1M1oiIGZpbGw9InZhcigtLWdlaXN0LWZvcmVncm91bmQpIj48L3BhdGg+PHBhdGggZD0iTTM4Ny42OTEgNTQuNTMzOEMzODcuNTQ0IDUzLjEyNTEgMzg2Ljg5OCA1Mi4wMjU0IDM4NS43NzMgNTEuMjQzOEMzODQuNjM4IDUwLjQ1MzEgMzgzLjE3MiA1MC4wNjIzIDM4MS4zNzMgNTAuMDYyM0MzODAuMTEgNTAuMDYyMyAzNzkuMDIyIDUwLjI1MzIgMzc4LjExOCA1MC42MjU4QzM3Ny4yMTQgNTEuMDA3NSAzNzYuNTEzIDUxLjUxNjQgMzc2LjAzMyA1Mi4xNjE3QzM3NS41NTQgNTIuODA3IDM3NS4zMTQgNTMuNTQzMiAzNzUuMjk1IDU0LjM3MDNDMzc1LjI5NSA1NS4wNjEgMzc1LjQ2MSA1NS42NjA4IDM3NS43ODQgNTYuMTYwN0MzNzYuMTA3IDU2LjY2OTYgMzc2LjU0IDU3LjA5NjggMzc3LjEwMyA1Ny40NDIyQzM3Ny42NTYgNTcuNzk2NiAzNzguMjc0IDU4LjA4NzQgMzc4Ljk0OCA1OC4zMjM3QzM3OS42MyA1OC41NiAzODAuMzEzIDU4Ljc2IDM4MC45OTUgNTguOTIzNkwzODQuMTQgNTkuNjk2MUMzODUuNDA0IDU5Ljk4NjkgMzg2LjYzMSA2MC4zNzc4IDM4Ny44MDIgNjAuODc3NkMzODguOTczIDYxLjM2ODQgMzkwLjAzNCA2MS45OTU1IDM5MC45NjUgNjIuNzQ5OEMzOTEuODk3IDYzLjUwNDIgMzkyLjYzNSA2NC40MTMgMzkzLjE3OSA2NS40NzY0QzM5My43MjMgNjYuNTM5NyAzOTQgNjcuNzg0OCAzOTQgNjkuMjIwOEMzOTQgNzEuMTU2NiAzOTMuNTAyIDcyLjg1NjIgMzkyLjQ5NiA3NC4zMjg1QzM5MS40OTEgNzUuNzkxNyAzOTAuMDQzIDc2LjkzNjkgMzg4LjE0MyA3Ny43NjRDMzg2LjI1MiA3OC41ODIgMzgzLjk2NSA3OSAzODEuMjcyIDc5QzM3OC42NzEgNzkgMzc2LjQwMiA3OC42MDAyIDM3NC40OTMgNzcuODAwNEMzNzIuNTc1IDc3LjAwOTcgMzcxLjA4IDc1Ljg0NjMgMzcwLjAwMSA3NC4zMTk0QzM2OC45MjIgNzIuNzkyNiAzNjguMzQxIDcwLjkyOTQgMzY4LjI1OCA2OC43MzkxSDM3NC4yMzVDMzc0LjMxOCA2OS44ODQyIDM3NC42ODcgNzAuODM4NiAzNzUuMzE0IDcxLjYxMTFDMzc1Ljk1IDcyLjM3NDUgMzc2Ljc4IDcyLjkzOCAzNzcuNzk1IDczLjMxOTdDMzc4LjgxOSA3My42OTIzIDM3OS45NjIgNzMuODgzMiAzODEuMjI2IDczLjg4MzJDMzgyLjU0NSA3My44ODMyIDM4My43MDcgNzMuNjgzMiAzODQuNzEyIDczLjI5MjRDMzg1LjcwOCA3Mi45MDE2IDM4Ni40OTIgNzIuMzU2NCAzODcuMDU1IDcxLjY0NzVDMzg3LjYyNyA3MC45NDc2IDM4Ny45MTMgNzAuMTIwNiAzODcuOTIyIDY5LjE3NTRDMzg3LjkxMyA2OC4zMTIgMzg3LjY1NCA2Ny41OTM5IDM4Ny4xNTYgNjcuMDMwNEMzODYuNjQ5IDY2LjQ2NyAzODUuOTQ4IDY1Ljk5NDQgMzg1LjA1MyA2NS42MTI3QzM4NC4xNSA2NS4yMzEgMzgzLjA5OCA2NC44ODU2IDM4MS44OTkgNjQuNTg1N0wzNzguMDgxIDYzLjYyMjNDMzc1LjMyMyA2Mi45MjI1IDM3My4xMzcgNjEuODU5MiAzNzEuNTQxIDYwLjQzMjNDMzY5LjkzNyA1OS4wMDU0IDM2OS4xNDMgNTcuMTE1IDM2OS4xNDMgNTQuNzQyOUMzNjkuMTQzIDUyLjc5OCAzNjkuNjc4IDUxLjA4OTQgMzcwLjc1OCA0OS42MjYxQzM3MS44MjcgNDguMTYyOSAzNzMuMjk0IDQ3LjAyNjggMzc1LjE0OCA0Ni4yMTc5QzM3Ny4wMTEgNDUuNCAzNzkuMTE0IDQ1IDM4MS40NTYgNDVDMzgzLjgzNiA0NSAzODUuOTIgNDUuNCAzODcuNzE5IDQ2LjIxNzlDMzg5LjUxNyA0Ny4wMjY4IDM5MC45MjkgNDguMTUzOCAzOTEuOTUyIDQ5LjU4OTdDMzkyLjk3NiA1MS4wMjU3IDM5My41MTEgNTIuNjcwNyAzOTMuNTM5IDU0LjUzMzhIMzg3LjY5MVoiIGZpbGw9InZhcigtLWdlaXN0LWZvcmVncm91bmQpIj48L3BhdGg+PC9zdmc+";

export async function GET(request: Request) {
  // 你应该在这里获取id，然后根据id生成对应的pdf

  try{// 下载示例
    const buffer = Buffer.from(svgBase64, "base64");
    console.log("swdwd")
    // const buffer1 = await renderToBuffer(<MyDocument data={datas[1]} />);
    const buffer12 = await renderToBuffer(<MyDocument data={datas[1]} />);
    const headers = new Headers();
    headers.append("Content-Disposition", 'attachment; filename="example.svg"');
    headers.append("Content-Type", "image/svg+xml");
    return new Response(buffer, {
      headers,
    })
  }catch (error) {
    // 捕获并记录错误
    console.error("Error occurred:", error);
    return new Response("Internal Server Error", { status: 500 });
  }
  ;
}
